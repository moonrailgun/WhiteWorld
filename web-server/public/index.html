<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <title></title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta http-equiv="content-type" content="text/html;charset=utf-8"/>
    <meta http-equiv="content-style-type" content="text/css"/>
    <meta http-equiv="content-scripte-type" content="text/javascript"/>
    <link type="text/css" rel="stylesheet" href="css/bootstrap.min.css"/>
    <link type="text/css" rel="stylesheet" href="css/login.css"/>
    <script src="js/lib/jquery-2.1.4.js"></script>
    <script src="js/lib/socket.io.js"></script>
    <script src="js/lib/pomeloclient.js"></script>
    <script src="js/starry.night.js"></script>
    <script src="js/netHelper.js"></script>
    <script src="js/login.js"></script>
    <script type="text/javascript">
        var pomelo = window.pomelo;
        var host = "127.0.0.1";
        var port = "3010";
        function show() {
            pomelo.init({
                host: host,
                port: port,
                log: true
            }, function () {
                pomelo.request("connector.entryHandler.entry", "hello pomelo", function (data) {
                    alert(data.msg);
                });
            });
        }

        function selectModel(index) {
            if (index == 0) {
                alert('单人模式尚未完成。视为多人模式');
            }
            $('#selectModel').hide();
            $('#selectServer').show();
            $('#login').hide();
        }

        function selectServer(index) {
            var ip = '127.0.0.1';
            if (index == 1) {
                ip = prompt('请输入服务器IP:', '127.0.0.1');
                if (!ip) {
                    return;
                }
            }

            $.ping({
                url: ip + ':3001',
                afterPing: function (ping) {
                    var addon = '';
                    if (ping < 100) {
                        addon = '网络良好';
                    } else if (ping < 500) {
                        addon = '网络状况一般';
                    } else {
                        addon = '网络状况很差，不建议进行游戏';
                    }
                    alert(ip + ':' + ping + 'ms,' + addon);
                    $('#selectModel').hide();
                    $('#selectServer').hide();
                    $('#login').show();
                }
            });
        }

        //todo
        function login() {
            var login = new Login({
                ip: '127.0.0.1',
                port: '3014'
            });
            login.login('admin','admin');
        }
        $(document).ready(function () {
            login();
        });
    </script>
</head>
<body>
<div id="msg"></div>
<canvas id="canvas" width="1087"
        style="width:100vw !important;height:100vh !important;position:fixed !important;left:0;top:0"
        height="804"></canvas>

<div id="panel" class="loginBlock col-sm-8 col-sm-offset-2">
    <div id="selectModel" class="col-sm-10 col-sm-offset-1">
        <button class="btn btn-lg btn-default btn-block" onclick="selectModel(0);">单人游戏</button>
        <button class="btn btn-lg btn-default btn-block" onclick="selectModel(1);">多人游戏</button>
    </div>
    <div id="selectServer" class="loginBlock col-sm-10 col-sm-offset-1" style="display: none;">
        <button class="btn btn-lg btn-default btn-block" onclick="selectServer(0);">本地服务器</button>
        <button class="btn btn-lg btn-default btn-block" onclick="selectServer(1);">远程服务器</button>
    </div>
    <div id="login" class="loginBlock" style="display: none;">
        <form>
            <div class="form-group clearfix">
                <label class="col-lg-2"></label>

                <div class="col-lg-8"><h3>用户登录</h3></div>
            </div>
            <div class="form-group clearfix">
                <label id="loginUser" for="username" class="col-lg-2">用户名</label>

                <div class="col-lg-8">
                    <input id="username" name="username" class="form-control" type="text" required>
                </div>
            </div>
            <div class="form-group clearfix">
                <label id="loginPwd" for="password" class="col-lg-2">密码</label>

                <div class="col-lg-8">
                    <input id="password" name="password" class="form-control" type="password" required>
                </div>
            </div>
            <div class="form-group clearfix">
                <label for="password" class="col-lg-2 control-label"></label>

                <div class="col-lg-8">
                    <a href="#" style="font-weight:800">忘记密码了</a>
                </div>
            </div>
            <div class="form-group clearfix">
                <div class="col-lg-3 col-lg-offset-2">
                    <button class='btn btn-lg btn-block'>注册</button>
                </div>
                <div class="col-lg-5 col-lg-offset-0">
                    <button class='btn btn-lg btn-block' type='submit'>登录</button>
                </div>
            </div>
        </form>
    </div>
</div>
</body>
</html>
